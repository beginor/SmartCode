@using SmartCode
@using SmartCode.Generator.Entity
@using static SmartCode.Generator.RazorTemplates.Contributions.Common;
@model BuildContext
@{
    var project = Model.Project;
    var buildTask = Model.Build;
    var table = Model.GetCurrentTable();
    var normalColumns = table.Columns.Where(col => !col.IsPrimaryKey);
    var newLine = Environment.NewLine;
    var pkType = "string";
}
using System;
using System.ComponentModel.DataAnnotations;
using Beginor.AppFx.Core;

namespace @(project.Author).@(project.Module).@(buildTask.Module) {

    @($"/// <summary>{table.GetSummary()}模型</summary>")
    public partial class @(table.ConvertedName + "Model") : StringEntity {

    @foreach (var col in normalColumns) {
        @(Html.PadLeft(8) + $"/// <summary>{col.GetSummary()}</summary>{newLine}")
        @if (!col.IsNullable) { @(Html.PadLeft(8) + $"[Required(ErrorMessage = \"{col.GetSummary()} 必须填写！\")]{newLine}") }
        @(Html.PadLeft(8) + $"public {ConvertCsModelType(col)} {col.ConvertedName} {{ get; set; }}{newLine}")
    }

    }

    @($"/// <summary>{table.GetSummary()}搜索参数</summary>")
    public partial class @(table.ConvertedName)SearchModel : PaginatedRequestModel { }

}
